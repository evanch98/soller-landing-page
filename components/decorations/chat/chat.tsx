import { motion, MotionValue } from "framer-motion";

const messageBox1Variant = {
  hidden: {
    y: 0,
  },
  visible: {
    y: [20, 0, 10, 0],
    transition: {
      duration: 2,
      times: [0, 0.2, 0.4, 1],
      ease: "easeInOut",
      staggerChildren: 0.5,
    },
  },
};

const messageBox2Variant = {
  hidden: {
    y: 0,
  },
  visible: {
    y: [20, 0, 10, 0],
    transition: {
      delay: 2,
      duration: 2,
      times: [0, 0.2, 0.4, 1],
      ease: "easeInOut",
      delayChildren: 2,
      staggerChildren: 0.5,
    },
  },
};

const messageBoxLine = {
  hidden: {
    scaleX: 0,
  },
  visible: {
    scaleX: 1,
    transition: { duration: 1.5 },
  },
};

const bottomBoxLine1 = {
  hidden: {
    scaleX: 0,
  },
  visible: {
    scaleX: 1,
    transition: { delay: 4, duration: 1 },
  },
};

const bottomBoxLine2 = {
  hidden: {
    scaleX: 0,
  },
  visible: {
    scaleX: 1,
    transition: { delay: 4.5, duration: 1 },
  },
};

const bottomSquare = {
  hidden: {
    y: 0,
  },
  visible: {
    y: [0, -20, 0],
    transition: {
      delay: 5,
      duration: 1,
      ease: "easeInOut",
      staggerChildren: 0.5,
    },
  },
};

const bottomCircle1 = {
  hidden: {
    y: 0,
  },
  visible: {
    y: [0, -20, 0],
    transition: {
      delay: 5.2,
      duration: 1,
      ease: "easeInOut",
      staggerChildren: 0.5,
    },
  },
};

const bottomCircle2 = {
  hidden: {
    y: 0,
  },
  visible: {
    y: [0, -20, 0],
    transition: {
      delay: 5.4,
      duration: 1,
      ease: "easeInOut",
      staggerChildren: 0.5,
    },
  },
};

const bottomButton = {
  hidden: {
    y: 0,
    fill: "#1E3A8A",
  },
  visible: {
    y: [0, -20, 0, -20, 0],
    fill: "#84CC16",
    transition: {
      default: { delay: 6.2, duration: 2, ease: "easeInOut" },
      fill: { delay: 6.2, duration: 0.5 },
    },
  },
};

interface ChatProps {
  width?: number | string;
  height?: number | string;
  pos?: { x: MotionValue<number>; y: MotionValue<number> };
}

export const Chat = ({ width = 421, height = 710, pos }: ChatProps) => {
  return (
    <motion.svg
      width={`${width}`}
      height={`${height}`}
      viewBox="0 0 421 710"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true }}
      style={{ x: pos?.x, y: pos?.y }}
      className="flex-shrink-0"
    >
      <g id="chat">
        <g id="Group 21">
          <rect
            id="Rectangle 1"
            x="28.0773"
            y="0.495968"
            width="361.28"
            height="708.458"
            rx="20.6653"
            fill="#E0F2FE"
            stroke="#1E3A8A"
            strokeWidth="0.991935"
          />
          <path
            id="Rectangle 3"
            d="M389.853 138.871H394.569C395.299 138.871 395.891 139.463 395.891 140.193V228.116C395.891 228.847 395.299 229.439 394.569 229.439H389.853V138.871Z"
            fill="#60A5FA"
          />
          <path
            id="Rectangle 4"
            d="M21.5435 110.004C21.5435 109.274 22.1356 108.681 22.866 108.681H27.5813V175.098H22.866C22.1356 175.098 21.5435 174.506 21.5435 173.775V110.004Z"
            fill="#60A5FA"
          />
          <path
            id="Rectangle 5"
            d="M21.5435 191.515C21.5435 190.785 22.1356 190.193 22.866 190.193H27.5813V256.609H22.866C22.1356 256.609 21.5435 256.017 21.5435 255.287V191.515Z"
            fill="#60A5FA"
          />
          <rect
            id="Rectangle 2"
            x="45.695"
            y="18.1138"
            width="326.045"
            height="673.222"
            rx="15.871"
            fill="white"
          />
          <path
            id="Vector 1"
            d="M148.339 679.26H269.096"
            stroke="#1E3A8A"
            strokeWidth="2.64516"
            strokeLinecap="round"
          />
        </g>
        <g id="Group">
          <path
            id="Vector"
            d="M98.0109 264.783C118.812 264.783 135.674 247.92 135.674 227.12C135.674 206.319 118.812 189.457 98.0109 189.457C77.2102 189.457 60.3478 206.319 60.3478 227.12C60.3478 247.92 77.2102 264.783 98.0109 264.783Z"
            fill="#E0F2FE"
          />
          <path
            id="Vector_2"
            d="M98.0114 264.783C110.134 264.783 120.884 259.035 127.769 250.149C122.355 239.164 111.076 231.592 98.0114 231.592C84.9471 231.592 73.6678 239.164 68.2537 250.149C75.139 259.035 85.8887 264.783 98.0114 264.783Z"
            fill="#60A5FA"
          />
          <path
            id="Vector_3"
            d="M98.0116 227.12C104.793 227.12 110.291 221.622 110.291 214.84C110.291 208.058 104.793 202.56 98.0116 202.56C91.2297 202.56 85.7319 208.058 85.7319 214.84C85.7319 221.622 91.2297 227.12 98.0116 227.12Z"
            fill="#60A5FA"
          />
        </g>
        <g id="Group_2">
          <path
            id="Vector_4"
            d="M90.0217 73.0435C100.107 73.0435 108.283 64.8678 108.283 54.7826C108.283 44.6974 100.107 36.5217 90.0217 36.5217C79.9365 36.5217 71.7609 44.6974 71.7609 54.7826C71.7609 64.8678 79.9365 73.0435 90.0217 73.0435Z"
            fill="#E0F2FE"
          />
          <path
            id="Vector_5"
            d="M90.0218 73.0433C95.8995 73.0433 101.111 70.2566 104.45 65.9482C101.825 60.6221 96.356 56.9509 90.0218 56.9509C83.6876 56.9509 78.2188 60.6221 75.5938 65.9482C78.9321 70.2566 84.1441 73.0433 90.0218 73.0433Z"
            fill="#60A5FA"
          />
          <path
            id="Vector_6"
            d="M90.0221 54.7829C93.3103 54.7829 95.9759 52.1172 95.9759 48.829C95.9759 45.5409 93.3103 42.8752 90.0221 42.8752C86.7339 42.8752 84.0683 45.5409 84.0683 48.829C84.0683 52.1172 86.7339 54.7829 90.0221 54.7829Z"
            fill="#60A5FA"
          />
        </g>
        <g id="Group_3">
          <path
            id="Vector_7"
            d="M319.424 461.087C340.225 461.087 357.087 444.225 357.087 423.424C357.087 402.623 340.225 385.761 319.424 385.761C298.623 385.761 281.761 402.623 281.761 423.424C281.761 444.225 298.623 461.087 319.424 461.087Z"
            fill="#E0F2FE"
          />
          <path
            id="Vector_8"
            d="M319.424 461.087C331.547 461.087 342.297 455.34 349.182 446.454C343.768 435.469 332.489 427.897 319.424 427.897C306.36 427.897 295.081 435.469 289.667 446.454C296.552 455.34 307.302 461.087 319.424 461.087Z"
            fill="#60A5FA"
          />
          <path
            id="Vector_9"
            d="M319.425 423.424C326.207 423.424 331.704 417.926 331.704 411.144C331.704 404.363 326.207 398.865 319.425 398.865C312.643 398.865 307.145 404.363 307.145 411.144C307.145 417.926 312.643 423.424 319.425 423.424Z"
            fill="#60A5FA"
          />
        </g>
        <motion.g
          id="message-2"
          variants={messageBox2Variant}
        >
          <path
            id="Vector_10"
            d="M254.281 315H26.2266C12.2966 315 1 326.596 1 340.896V372.391C1 386.691 12.2966 398.288 26.2266 398.288H222.108C223.576 398.288 224.928 399.085 225.648 400.385L233.98 415.202C235.865 418.556 240.571 418.556 242.442 415.202L250.774 400.385C251.508 399.085 252.86 398.288 254.314 398.288H254.252C268.182 398.288 279.478 386.691 279.478 372.391V340.896C279.478 326.596 268.182 315 254.252 315H254.281Z"
            fill="#1E3A8A"
          />
          <path
            id="Vector_11"
            d="M247.384 315H26.2754C12.3184 315 1 326.596 1 340.896V372.391C1 386.691 12.3184 398.288 26.2754 398.288H214.744C216.215 398.288 217.57 399.085 218.291 400.385L226.639 415.202C228.528 418.556 233.243 418.556 235.117 415.202L243.465 400.385C244.201 399.085 245.556 398.288 247.012 398.288H247.355C261.312 398.288 272.63 386.691 272.63 372.391V340.896C272.63 326.596 261.312 315 247.355 315H247.384Z"
            fill="white"
            stroke="#1E3A8A"
            strokeWidth="0.75"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <motion.path
            id="message-line-3"
            d="M230.516 337.826H38.7087C35.5319 337.826 32.9565 340.402 32.9565 343.578C32.9565 346.755 35.5319 349.331 38.7087 349.331H230.516C233.693 349.331 236.268 346.755 236.268 343.578C236.268 340.402 233.693 337.826 230.516 337.826Z"
            fill="#60A5FA"
            variants={messageBoxLine}
            style={{ originX: 0 }}
          />
          <motion.path
            id="message-line-4"
            d="M114.103 360.652H38.7087C35.5319 360.652 32.9565 363.227 32.9565 366.404C32.9565 369.581 35.5319 372.156 38.7087 372.156H114.103C117.28 372.156 119.855 369.581 119.855 366.404C119.855 363.227 117.28 360.652 114.103 360.652Z"
            fill="#60A5FA"
            variants={messageBoxLine}
            style={{ originX: 0 }}
          />
        </motion.g>
        <motion.g
          id="message-1"
          variants={messageBox1Variant}
        >
          <path
            id="Vector_12"
            d="M395.802 136.957H167.748C153.818 136.957 142.522 148.553 142.522 162.853V194.348C142.522 208.648 153.818 220.244 167.748 220.244H178.738C180.206 220.244 181.559 221.042 182.278 222.342L190.611 237.159C192.496 240.512 197.201 240.512 199.072 237.159L207.404 222.342C208.138 221.042 209.491 220.244 210.944 220.244H395.773C409.703 220.244 421 208.648 421 194.348V162.853C421 148.553 409.703 136.957 395.773 136.957H395.802Z"
            fill="#1E3A8A"
          />
          <path
            id="Vector_13"
            d="M388.906 136.957H167.797C153.84 136.957 142.522 148.553 142.522 162.853V194.348C142.522 208.648 153.84 220.244 167.797 220.244H171.374C172.845 220.244 174.2 221.042 174.921 222.342L183.269 237.159C185.158 240.512 189.873 240.512 191.747 237.159L200.096 222.342C200.831 221.042 202.186 220.244 203.643 220.244H388.877C402.834 220.244 414.152 208.648 414.152 194.348V162.853C414.152 148.553 402.834 136.957 388.877 136.957H388.906Z"
            fill="white"
            stroke="#1E3A8A"
            strokeWidth="0.75"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <motion.path
            id="message-line-1"
            d="M372.038 159.783H180.23C177.054 159.783 174.478 162.358 174.478 165.535C174.478 168.712 177.054 171.287 180.23 171.287H372.038C375.215 171.287 377.79 168.712 377.79 165.535C377.79 162.358 375.215 159.783 372.038 159.783Z"
            fill="#60A5FA"
            variants={messageBoxLine}
            style={{ originX: 0 }}
          />
          <motion.path
            id="message-line-2"
            d="M255.625 182.609H180.23C177.054 182.609 174.478 185.184 174.478 188.361C174.478 191.538 177.054 194.113 180.23 194.113H255.625C258.802 194.113 261.377 191.538 261.377 188.361C261.377 185.184 258.802 182.609 255.625 182.609Z"
            fill="#60A5FA"
            variants={messageBoxLine}
            style={{ originX: 0 }}
          />
        </motion.g>
        <path
          id="Vector_14"
          d="M338.912 493.043H76.2406C67.4633 493.043 60.3478 500.152 60.3478 508.92V641.514C60.3478 650.283 67.4633 657.391 76.2406 657.391H338.912C347.689 657.391 354.804 650.283 354.804 641.514V508.92C354.804 500.152 347.689 493.043 338.912 493.043Z"
          fill="#E0F2FE"
        />
        <motion.rect
          id="bottom-square"
          x="76.7011"
          y="614.397"
          width="24.3587"
          height="24.3587"
          rx="2.625"
          fill="#60A5FA"
          stroke="#60A5FA"
          strokeWidth="0.75"
          variants={bottomSquare}
        />
        <motion.path
          id="bottom-button"
          d="M321.15 609.457H251.502C241.74 609.457 233.826 617.121 233.826 626.576C233.826 636.031 241.74 643.696 251.502 643.696H321.15C330.912 643.696 338.826 636.031 338.826 626.576C338.826 617.121 330.912 609.457 321.15 609.457Z"
          fill="#1E3A8A"
          variants={bottomButton}
        />
        <motion.path
          id="message-line-5"
          d="M328.668 520.435H82.0783C78.9014 520.435 76.3261 523.01 76.3261 526.187C76.3261 529.364 78.9014 531.939 82.0783 531.939H328.668C331.845 531.939 334.421 529.364 334.421 526.187C334.421 523.01 331.845 520.435 328.668 520.435Z"
          fill="#60A5FA"
          variants={bottomBoxLine1}
          style={{ originX: 0 }}
        />
        <path
          id="Vector_16"
          d="M195.622 47.9348H128.226C123.515 47.9348 119.696 51.5117 119.696 55.9239C119.696 60.3362 123.515 63.9131 128.226 63.9131H195.622C200.333 63.9131 204.152 60.3362 204.152 55.9239C204.152 51.5117 200.333 47.9348 195.622 47.9348Z"
          fill="#1E3A8A"
        />
        <motion.path
          id="message-line-6"
          d="M168.886 545.543H82.0783C78.9014 545.543 76.3261 548.119 76.3261 551.296C76.3261 554.472 78.9014 557.048 82.0783 557.048H168.886C172.063 557.048 174.638 554.472 174.638 551.296C174.638 548.119 172.063 545.543 168.886 545.543Z"
          fill="#60A5FA"
          variants={bottomBoxLine2}
          style={{ originX: 0 }}
        />
        <motion.circle
          id="bottom-circle-1"
          cx="120.837"
          cy="626.576"
          r="10.2717"
          fill="#60A5FA"
          variants={bottomCircle1}
        />
        <motion.circle
          id="bottom-circle-2"
          cx="150.511"
          cy="626.576"
          r="10.2717"
          fill="#60A5FA"
          variants={bottomCircle2}
        />
        <path
          id="Vector 37"
          d="M51.2174 93.5869H366.217"
          stroke="#1E3A8A"
          strokeWidth="0.75"
          strokeLinecap="round"
        />
      </g>
    </motion.svg>
  );
};
